pipeline {
    agent any
    stages {
        stage('Checkout') {
            steps {
                checkout scm
            }
        }
        stage('Build') {
            steps {
             bat '''cd %cd%\\Debug_FLASH
                make all'''
            }
        }
         stage('Flash') {
            steps {
                bat '''cd..
                    cd %cd%\\CI_CD_Pipeline\\TargetFlash
                    python TargetFlash.py'''
            }
        }
    }
    
	post {
        success {
            emailext body: "Build Passed ${env.BUILD_URL}", recipientProviders: [[$class: 'DevelopersRecipientProvider'], [$class: 'RequesterRecipientProvider']], subject: "Successful Build: ${currentBuild.fullDisplayName}"
        }
        failure {
            emailext body: "Something is wrong with ${env.BUILD_URL}", recipientProviders: [[$class: 'DevelopersRecipientProvider'], [$class: 'RequesterRecipientProvider']], subject: "Failed Pipeline: ${currentBuild.fullDisplayName}" 
        }
    }
  
}


